<div class="finish-container">
  <div class="finish-content">
    <!-- Success Animation -->
    <div class="success-animation">
      <div class="check-circle">
        <svg class="check-icon" viewBox="0 0 24 24">
          <path d="M9 12l2 2 4-4" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </div>
    </div>

    <!-- Success Message -->
    <div class="success-message">
      <h1>Agendamento concluído com sucesso!</h1>
      <p class="gratitude">Obrigado por escolher a <strong>J & B Barbear Shop</strong></p>

      <!-- Appointment Details -->
      <div class="appointment-summary">
        <h3>Detalhes do seu agendamento:</h3>
        <div class="detail-grid">
          <div class="detail-item">
            <span class="label">Cliente:</span>
            <span class="value">{{ appointmentData?.clientName || 'Nome não informado' }}</span>
          </div>
          <div class="detail-item">
            <span class="label">Telefone:</span>
            <span class="value">{{ appointmentData?.clientPhone || 'Telefone não informado' }}</span>
          </div>
          <div class="detail-item">
            <span class="label">Serviço:</span>
            <span class="value">{{ appointmentData?.serviceName || 'Serviço não selecionado' }}</span>
          </div>
          <div class="detail-item">
            <span class="label">Barbeiro:</span>
            <span class="value">{{ appointmentData?.barberName || 'Barbeiro não selecionado' }}</span>
          </div>
          <div class="detail-item">
            <span class="label">Data:</span>
            <span class="value">{{ appointmentData?.appointmentDate || 'Data não selecionada' }}</span>
          </div>
          <div class="detail-item">
            <span class="label">Horário:</span>
            <span class="value">{{ appointmentData?.appointmentTime || 'Horário não selecionado' }}</span>
          </div>
          <div class="detail-item">
            <span class="label">Duração:</span>
            <span class="value">{{ appointmentData?.serviceDuration || '30 min' }}</span>
          </div>
          <div class="detail-item">
            <span class="label">Valor:</span>
            <span class="value">{{ appointmentData?.totalPrice || 'R$ 0,00' }}</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Feedback Section -->
    <div class="feedback-section">
      <h3>Como foi sua experiência com nosso sistema?</h3>
      <p class="feedback-subtitle">Sua opinião é muito importante para nós!</p>

      <!-- Star Rating -->
      <div class="rating-container">
        <div class="stars">
          @for (star of [1,2,3,4,5]; track star) {
            <button
              class="star"
              [class.active]="rating >= star"
              [class.hover]="hoverRating >= star"
              (click)="setRating(star)"
              (mouseenter)="setHoverRating(star)"
              (mouseleave)="setHoverRating(0)">
              ⭐
            </button>
          }
        </div>
        <span class="rating-text">{{ getRatingText() }}</span>
      </div>

      <!-- Feedback Textarea -->
      <div class="feedback-input">
        <label for="feedback">Deixe seu comentário (opcional):</label>
        <textarea
          id="feedback"
          [(ngModel)]="feedbackText"
          placeholder="Conte-nos como foi sua experiência..."
          maxlength="500"
          rows="4">
        </textarea>
        <span class="char-count">{{ feedbackText.length }}/500</span>
      </div>

      <!-- Submit Feedback -->
      <button
        class="feedback-btn"
        [disabled]="rating === 0"
        (click)="submitFeedback()">
        @if (feedbackSubmitted) {
          <span>✓ Feedback enviado!</span>
        } @else {
          <span>Enviar Feedback</span>
        }
      </button>
    </div>

    <!-- Action Buttons -->
    <div class="action-buttons">
      <button class="btn secondary" (click)="goHome()">
        Voltar ao Início
      </button>
      <button class="btn primary" (click)="newAppointment()">
        Novo Agendamento
      </button>
    </div>
  </div>
</div>
